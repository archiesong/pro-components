"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),r=require("ant-design-vue"),h=require("@ant-design/icons-vue"),w=require("./style/index.js"),N=require("./LayoutChange.js"),k=require("./BlockCheckbox.js"),T=require("./ThemeColor.js"),D=require("./icon/group.js"),q=require("./icon/sub.js"),B=require("./RegionalChange.js"),F=require("../../utils/index.js"),O=require("ant-design-vue/lib/config-provider/context"),A=require("../../defaultSettings.js"),f=require("@ant-design-vue/pro-utils");function P(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!e.isVNode(t)}const M=()=>({settings:Object,prefixCls:{type:String,default:void 0},collapsed:{type:Boolean,default:void 0},colorList:{type:[Array,Boolean],default:void 0},hideHintAlert:{type:Boolean,default:void 0},hideCopyButton:{type:Boolean,default:void 0},onSettingChange:{type:Function,default:void 0},onCollapse:{type:Function,default:void 0},"onUpdate:collapsed":{type:Function,default:void 0}}),y=({hashId:t,prefixCls:m,title:C},{slots:g})=>{var a;return e.createVNode("div",{style:{marginBlockEnd:"12px"}},[e.createVNode("h3",{class:`${m}-body-title ${t}`},[C]),(a=g.default)==null?void 0:a.call(g)])},$=t=>JSON.stringify(f.omit({...t,colorPrimary:t.colorPrimary},["colorWeak"]),null,2),j=e.defineComponent({name:"SettingDrawer",inheritAttrs:!1,props:M(),setup(t){const{getPrefixCls:m,locale:C}=O.useConfigContextInject(),g=e.ref(),a=e.computed(()=>`${t.prefixCls||m("pro")}-setting-drawer`),l=N.getFormatMessage(C),{wrapSSR:V,hashId:i}=w.useStyle(a),[v,x]=f.useMountMergeState(!1,{value:t.collapsed===void 0?void 0:e.ref(t.collapsed),onChange:o=>{var s,n;return((s=t["onUpdate:collapsed"])==null?void 0:s.call(t,o))&&((n=t.onCollapse)==null?void 0:n.call(t,o))}}),b=e.computed(()=>{var o;return f.classNames(a.value,i.value,{[`${a.value}-collapsed`]:!v.value,[`${a.value}-realDark`]:((o=t.settings)==null?void 0:o.navTheme)==="realDark"})}),[u,I]=f.useMountMergeState(A.default,{value:t.settings===void 0?void 0:e.computed(()=>t.settings||{}),onChange:t.onSettingChange}),p=(o,s)=>{const n={};if(n[o]=s,o==="layout"&&(n.contentWidth=s==="top"?"Fixed":"Fluid",["mix","side"].includes(s)||(n.siderMenuType="sub")),o==="layout"&&s!=="mix"&&(n.splitMenus=!1),o==="layout"&&s==="mix"&&(n.fixedHeader=!0),o==="layout"&&s==="left"&&(n.fixSiderbar=!0,n.fixedHeader=!0),o==="colorWeak"){const c=document.querySelector("body");if(!c)return;s?(c.dataset.prosettingdrawer=c.style.filter,c.style.filter="invert(80%)"):(c.style.filter=c.dataset.prosettingdrawer||"none",delete c.dataset.prosettingdrawer)}delete n.menu,delete n.title,delete n.iconfontUrl,delete n.logo,delete n.pwa,I({...u.value,...n})};return()=>{let o;const{colorList:s=[{key:"techBlue",color:"#1677FF"},{key:"daybreak",color:"#1890FF"},{key:"dust",color:"#F5222D"},{key:"volcano",color:"#FA541C"},{key:"sunset",color:"#FAAD14"},{key:"cyan",color:"#13C2C2"},{key:"green",color:"#52C41A"},{key:"geekblue",color:"#2F54EB"},{key:"purple",color:"#722ED1"}],hideCopyButton:n,hideHintAlert:c}=t;return V(e.createVNode(r.Drawer,{open:v.value,closable:!1,width:300,rootClassName:b.value,onClose:()=>x(!1),placement:"right",handle:e.createVNode("div",{class:f.classNames(`${a.value}-handle`,i.value),onClick:()=>x(!v.value)},[v.value?e.createVNode(h.CloseOutlined,{style:{color:"rgb(255,255,255)",fontSize:"20px"}},null):e.createVNode(h.SettingOutlined,{spin:!0,style:{color:"rgb(255,255,255)",fontSize:"20px"}},null)])},{default:()=>[e.createVNode("div",{class:f.classNames(`${a.value}-content`,i.value)},[e.createVNode(y,{prefixCls:a.value,hashId:i.value,title:l({id:"app.setting.pagestyle",defaultMessage:"整体风格设置"})},{default:()=>[e.createVNode(k.default,{hashId:i.value,prefixCls:a.value,list:[{key:"light",title:l({id:"app.setting.pagestyle.light",defaultMessage:"亮色菜单风格"})},{key:"dark",title:l({id:"app.setting.pagestyle.dark",defaultMessage:"暗色菜单风格"})},{key:"realDark",title:l({id:"app.setting.pagestyle.realdark",defaultMessage:"暗色风格"})}],configType:"theme",key:"navTheme",value:u.value.navTheme,onChange:d=>p("navTheme",d)},null)]}),s!==!1&&e.createVNode(y,{hashId:i.value,title:l({id:"app.setting.themecolor",defaultMessage:"主题色"}),prefixCls:a.value},{default:()=>[e.createVNode(T.default,{hashId:i.value,prefixCls:a.value,colorList:s,formatMessage:l,value:F.genStringToTheme(u.value.colorPrimary),onChange:async d=>{var S;d!==u.value.colorPrimary&&(g.value=r.message.loading(l({id:"app.setting.loading",defaultMessage:"正在加载主题"}),0)),p("colorPrimary",d),g.value&&((S=g.value)==null||S.call(g))}},null)]}),e.createVNode(r.Divider,null,null),e.createVNode(y,{hashId:i.value,title:l({id:"app.setting.navigationmode",defaultMessage:"导航模式"}),prefixCls:a.value},{default:()=>[e.createVNode(k.default,{prefixCls:a.value,value:u.value.layout,key:"layout",hashId:i.value,configType:"layout",list:[{key:"side",title:l({id:"app.setting.sidemenu",defaultMessage:"侧边菜单布局"})},{key:"top",title:l({id:"app.setting.topmenu",defaultMessage:"顶部菜单布局"})},{key:"mix",title:l({id:"app.setting.mixmenu",defaultMessage:"混合菜单布局"})},{key:"left",title:l({id:"app.setting.leftmenu",defaultMessage:"左侧混合布局"})}],onChange:d=>p("layout",d)},null)]}),u.value.layout==="side"||u.value.layout==="mix"?e.createVNode(y,{hashId:i.value,prefixCls:a.value,title:l({id:"app.setting.sidermenutype",defaultMessage:"侧边菜单类型"})},{default:()=>[e.createVNode(k.default,{prefixCls:a.value,value:u.value.siderMenuType,key:"siderMenuType",hashId:i.value,configType:"siderMenuType",list:[{key:"sub",icon:e.createVNode(q.SubIcon,null,null),title:l({id:"app.setting.sidermenutype-sub",defaultMessage:"经典模式"})},{key:"group",icon:e.createVNode(D.GroupIcon,null,null),title:l({id:"app.setting.sidermenutype-group",defaultMessage:"分组模式"})}],onChange:d=>p("siderMenuType",d)},null)]}):null,e.createVNode(N.LayoutSetting,{prefixCls:a.value,hashId:i.value,formatMessage:l,settings:{...u.value},changeSetting:p},null),e.createVNode(r.Divider,null,null),e.createVNode(y,{hashId:i.value,prefixCls:a.value,title:l({id:"app.setting.regionalsettings",defaultMessage:"内容区域"})},{default:()=>[e.createVNode(B.default,{hashId:i.value,prefixCls:a.value,formatMessage:l,settings:{...u.value},changeSetting:p},null)]}),e.createVNode(r.Divider,null,null),e.createVNode(y,{hashId:i.value,prefixCls:a.value,title:l({id:"app.setting.othersettings",defaultMessage:"其他设置"})},{default:()=>[e.createVNode(r.List,{class:f.classNames(`${a.value}-list`,i.value),split:!1,size:"small",renderItem:({item:d})=>N.renderLayoutSettingItem(d),dataSource:[{title:l({id:"app.setting.weakmode",defaultMessage:"色弱模式"}),action:e.createVNode(r.Switch,{size:"small",class:"color-weak",checked:!!u.value.colorWeak,onChange:d=>{p("colorWeak",d)}},null)}]},null)]}),c&&n?null:e.createVNode(r.Divider,null,null),c?null:e.createVNode(r.Alert,{type:"warning",message:l({id:"app.setting.production.hint",defaultMessage:"配置栏只在开发环境用于预览，生产环境不会展现，请拷贝后手动修改配置文件"}),icon:e.createVNode(h.NotificationOutlined,null,null),showIcon:!0,style:{marginBlockEnd:"16px"}},null),n?null:e.createVNode(f.CopyToClipboard,{text:$(u.value),onCopy:()=>r.message.success(l({id:"app.setting.copyinfo",defaultMessage:"拷贝成功，请到 src/defaultSettings.js 中替换默认配置"}))},{default:()=>[e.createVNode(r.Button,{block:!0,icon:e.createVNode(h.CopyOutlined,null,null),style:{marginBlockEnd:"24px"}},P(o=l({id:"app.setting.copy"}))?o:{default:()=>[o]})]})])]}))}}});exports.default=j;exports.settingDrawerProps=M;
