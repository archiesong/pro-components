"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),T=require("ant-design-vue/lib/config-provider/context"),$=require("ant-design-vue"),u=require("@ant-design-vue/pro-utils"),j=require("@ant-design-vue/pro-provider"),F=require("../../context/RouteContext.js"),D=require("../GridContent/index.js"),A=require("../FooterToolbar/index.js"),B=require("./style/stylish.js"),W=require("./style/index.js"),I=require("../PageLoading/index.js"),O=require("./pageContainerProps.js");function M(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!e.isVNode(a)}const _=a=>typeof a=="object"?a:{spinning:a},U=({tabList:a,tabActiveKey:s,onTabChange:l,hashId:r,tabBarExtraContent:m,tabProps:h,prefixedClassName:c})=>Array.isArray(a)||m?e.createVNode($.Tabs,e.mergeProps(h,{class:u.classNames(`${c}-tabs`,r),activeKey:s,onChange:t=>{l&&l(t)},tabBarExtraContent:m}),{default:()=>[a==null?void 0:a.map((t,C)=>e.createVNode($.Tabs.TabPane,e.mergeProps({key:t.key||C,tab:t.tab},t),null))]}):null,K=(a,s,l,r)=>!a&&!s?null:e.createVNode("div",{class:u.classNames(`${l}-detail`,r)},[e.createVNode("div",{class:u.classNames(`${l}-main `,r)},[e.createVNode("div",{class:u.classNames(`${l}-row`,r)},[a&&e.createVNode("div",{class:u.classNames(`${l}-content`,r)},[a]),s&&e.createVNode("div",{class:u.classNames(`${l}-extraContent`,r)},[s])])])]),z=(a,s)=>{var x,b,H;const{title:l,content:r,pageHeaderRender:m,header:h,prefixedClassName:c,extraContent:t,prefixCls:C,hashId:d,value:g,breadcrumbRender:N,...V}=a,o=()=>{if(N)return N};if(m===!1)return null;if(m)return e.createVNode(e.Fragment,null,[e.createTextVNode(" "),m({...a,...g})]);let n=l;!l&&l!==!1&&(n=g.title);const{contentWidth:i,layout:q,...R}=g,P={...h,...V,...R,title:n,footer:U({...V,hashId:d,prefixedClassName:c})},{breadcrumb:f}=P,y=(!f||!(f!=null&&f.itemRender)&&!((x=f==null?void 0:f.routes)!=null&&x.length))&&!N;if(["title","subTitle","extra","tags","footer","avatar","backIcon"].every(w=>!P[w])&&y&&!r&&!t)return null;const v=(b=s.defalut)==null?void 0:b.call(s);return e.createVNode($.PageHeader,e.mergeProps(P,{class:u.classNames(`${c}-wrap-page-header`,d,{[`${c}-wrap-page-header-wide`]:i==="Fixed"&&q==="top"}),breadcrumb:N===!1?void 0:{...g.breadcrumbProps,...P.breadcrumb,itemRender:o()||((H=g.breadcrumbProps)==null?void 0:H.itemRender)||P.breadcrumb.itemRender},prefixCls:C}),{default:()=>[v||K(r,t,c,d)]})},k=e.defineComponent({name:"PageContainer",inheritAttrs:!1,props:O.pageContainerProps(),setup(a,{attrs:s,slots:l}){const r=F.useRouteContextInject();e.onMounted(()=>{var o,n;(n=(o=r.value)==null?void 0:o.setHasPageContainer)==null||n.call(o,(r.value.hasPageContainer||0)+1)}),e.onUnmounted(()=>{var o,n,i;!r.value||!((o=r.value)!=null&&o.setHasPageContainer)||(i=(n=r.value)==null?void 0:n.setHasPageContainer)==null||i.call(n,(r.value.hasPageContainer||0)-1)});const m=j.useProConfigContextInject(),{getPrefixCls:h}=T.useConfigContextInject(),c=e.computed(()=>a.prefixCls||h("pro")),t=e.computed(()=>`${c.value}-page-container`),{wrapSSR:C,hashId:d}=W.useStyle(t,e.computed(()=>a.token)),g=B.useStylish(e.computed(()=>`${t.value}.${t.value}-stylish`),{stylish:e.computed(()=>a.stylish)}),N=u.useMemo(()=>{var o,n;return a.breadcrumbRender==!1?!1:a.breadcrumbRender||((n=(o=a==null?void 0:a.header)==null?void 0:o.breadcrumb)==null?void 0:n.itemRender)},[()=>a.breadcrumbRender,()=>{var o,n;return(n=(o=a==null?void 0:a.header)==null?void 0:o.breadcrumb)==null?void 0:n.itemRender}]),V=u.useMemo(()=>{if(e.isVNode(a.loading||!1))return a.loading||!1;if(typeof(a.loading||!1)=="boolean"&&!a.loading)return null;const o=_(a.loading||!1);return o.spinning?e.createVNode(I.default,o,null):null},[()=>a.loading||!1]);return()=>{var w,S,p;const{loading:o,footer:n,affixProps:i,token:q,fixedHeader:R,breadcrumbRender:P,footerToolBarProps:f,...y}=a,v=z({...y,breadcrumbRender:N.value,ghost:!0,hashId:d.value,prefixCls:void 0,prefixedClassName:t.value,value:{title:r.value.title,breadcrumb:r.value.breadcrumb,breadcrumbProps:r.value.breadcrumbProps,contentWidth:r.value.contentWidth,layout:r.value.layout}},l),x=e.createVNode(e.Fragment,null,[l.default?e.createVNode(e.Fragment,null,[e.createVNode("div",{class:u.classNames(`${t.value}-children-content`,d.value,{[`${t.value}-children-content-no-header`]:!v})},[(w=l.default)==null?void 0:w.call(l)])]):null]),b=e.createVNode(e.Fragment,null,[a.waterMarkProps||r.value.waterMarkProps?e.createVNode($.Watermark,{...r.value.waterMarkProps,...a.waterMarkProps},{default:()=>[V.value||x]}):e.createVNode(e.Fragment,null,[V.value||x])]),H=u.classNames(t.value,d.value,s.class,{[`${t.value}-with-footer`]:n,[`${t.value}-with-affix`]:R&&v,[`${t.value}-stylish`]:!!y.stylish});return C(g.wrapSSR(e.createVNode(e.Fragment,null,[e.createVNode("div",e.mergeProps(s,{class:H}),[R&&v?e.createVNode($.Affix,e.mergeProps(i,{offsetTop:r.value.hasHeader&&r.value.fixedHeader?(p=(S=m.value.token.layout)==null?void 0:S.header)==null?void 0:p.heightLayoutHeader:1,target:i==null?void 0:i.target,class:u.classNames(`${t.value}-affix`,d.value)}),{default:()=>[e.createVNode("div",{class:u.classNames(`${t.value}-wrap`,d.value)},[v])]}):e.createVNode("div",{class:u.classNames(`${t.value}-wrap`,d.value)},[v]),b&&e.createVNode(D.default,null,M(b)?b:{default:()=>[b]})]),n&&e.createVNode(A.default,e.mergeProps(f,{stylish:y.footerStylish,prefixCls:c.value}),M(n)?n:{default:()=>[n]})])))}}});k.install=a=>(a.component(k.name,k),a);exports.default=k;
