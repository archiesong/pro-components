"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const l=require("vue"),b=require("ant-design-vue"),te=require("@ant-design-vue/pro-provider"),H=require("./BaseMenu.js"),ne=require("../AppsLogoComponents/index.js"),t=require("@ant-design-vue/pro-utils"),T=require("../CollapsedIcon/index.js"),ie=require("./style/stylish.js"),ue=require("../AppsLogoComponents/DefaultContent.js");function de(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!l.isVNode(e)}const{Sider:oe}=b.Layout,K=()=>({...H.baseMenuProps(),prefixCls:String,collapsedWidth:Number,logo:{type:[String,Function,Array,Boolean,Number,Object],default:void 0},appList:Array,appListRender:[Function,Object,Boolean],itemClick:Function,links:{type:[Array,Boolean],default:void 0},siderWidth:Number,menuHeaderRender:{type:[Boolean,Object,Function],default:void 0},menuContentRender:{type:[Function,Object,Boolean],default:void 0},menuFooterRender:{type:[Function,Object,Boolean],default:void 0},collapsedButtonRender:{type:[Function,Object,Boolean],default:void 0},siderProps:Object,breakpoint:{type:[String,Boolean],default:"lg"},hide:{type:Boolean,default:void 0},avatarProps:{type:[Object,Boolean],default:void 0},actionsRender:{type:[Function,Object,Boolean],default:void 0},menuExtraRender:{type:[Function,Object,Boolean],default:void 0},onMenuHeaderClick:{type:Function,default:void 0},logoStyle:{type:[Object,String],default:void 0},headerRender:{type:[Function,Boolean],default:void 0}}),_=()=>({matchMenuKeys:Array,originCollapsed:{type:Boolean,default:void 0},menuRenderType:String,stylish:Object}),z=(e,y="menuHeaderRender")=>{const{logo:n,title:a,layout:x}=e,h=e[y];if(h===!1)return null;const f=ue.defaultRenderLogo(n),m=l.createVNode("h1",null,[a??"Ant Design Vue Pro"]);return h?h(f,e.collapsed?null:m,e):x==="mix"&&y==="menuHeaderRender"&&!e.isMobile?!1:e.collapsed?l.createVNode("a",{key:"title"},[f]):l.createVNode("a",{key:"title"},[f,m])},se=l.defineComponent({name:"SiderMenu",inheritAttrs:!1,props:{...K(),..._()},setup(e,{attrs:y}){const n=te.useProConfigContextInject(),a=l.computed(()=>`${e.prefixCls}-sider`),x=l.computed(()=>`${a.value}.${a.value}-stylish`),h=t.useMemo(()=>{var i;return(i=e==null?void 0:e.menu)!=null&&i.hideMenuWhenCollapsed&&e.collapsed?`${a.value}-hide-menu-collapsed`:null},[()=>a.value,()=>e.collapsed,()=>{var i;return(i=e==null?void 0:e.menu)==null?void 0:i.hideMenuWhenCollapsed}]),f=t.useMemo(()=>e.isMobile?!1:e.layout!=="mix",[()=>e.isMobile,()=>e.layout]),m=l.computed(()=>e.collapsedWidth||64),E=t.useMemo(()=>l.createVNode(ne.default,{onItemClick:e.itemClick,appListRender:e.appListRender,appList:e.appList,prefixCls:e.prefixCls},null),[()=>e.appList,()=>e.layout,()=>e.appListRender,()=>e.prefixCls]),U=ie.useStylish(x,{stylish:e.stylish,proLayoutCollapsedWidth:m.value}),M=t.useMemo(()=>{if(!e.avatarProps)return null;const{title:i,render:o,...u}=e.avatarProps,s=l.createVNode("div",{class:`${a.value}-actions-avatar ${n.value.hashId}`},[u!=null&&u.src||u!=null&&u.srcset||u.icon?l.createVNode(b.Avatar,l.mergeProps({size:28},u),null):null,e.avatarProps.title&&!e.collapsed&&l.createVNode("span",null,[i])]);return o?o(e.avatarProps,s,e):s},[()=>e.avatarProps,()=>a.value,()=>e.collapsed]),V=t.useMemo(()=>{var o;let i;return e.actionsRender?l.createVNode(b.Space,{align:"center",size:4,direction:e.collapsed?"vertical":"horizontal",class:t.classNames([`${a.value}-actions-list`,e.collapsed&&`${a.value}-actions-list-collapsed`,n.value.hashId])},de(i=[(o=e.actionsRender)==null?void 0:o.call(e,e)].flat(1).map((u,s)=>l.createVNode("div",{key:s,class:t.classNames(`${a.value}-actions-list-item`,n.value.hashId)},[u])))?i:{default:()=>[i]}):null},[()=>e.actionsRender,()=>a.value,()=>e.collapsed]),X=t.useMemo(()=>!M.value&&!V.value?null:l.createVNode("div",{class:t.classNames(`${a.value}-actions`,n.value.hashId,e.collapsed&&`${a.value}-actions-collapsed`)},[M.value,V.value]),[()=>V.value,()=>M.value,()=>a.value,()=>e.collapsed,()=>n.value.hashId]),g=t.useMemo(()=>e.layout==="mix"&&!e.isMobile?"light":e.navTheme==="realDark"?"dark":e.navTheme,[()=>e.navTheme,()=>e.isMobile,()=>e.layout]),S=t.useMemo(()=>{if(e.collapsedButtonRender===!1)return null;const i={class:`${a.value}-collapsed-button-menu-icon`,key:"collapsed-button-icon",title:"",label:l.createVNode(l.Fragment,null,[l.createTextVNode("â€‹")]),icon:l.createVNode(T.default,{collapsed:e.collapsed},null)};return e.collapsedButtonRender?e.collapsedButtonRender(e.collapsed,l.createVNode(T.default,{collapsed:e.collapsed},null)):l.createVNode(b.Menu,{inlineIndent:16,class:t.classNames(`${a.value}-collapsed-button-menu`,n.value.hashId),selectedKeys:[],openKeys:[],theme:g.value,mode:"inline",onClick:()=>{var o;return(o=e.onCollapse)==null?void 0:o.call(e,!e.collapsed)},items:[i]},null)},[()=>e.collapsedButtonRender,()=>e.isMobile,()=>e.layout,()=>e.originCollapsed,()=>a.value,()=>e.collapsed,()=>g.value,()=>e.onCollapse]);return()=>{const{breakpoint:i="lg",stylish:o,navTheme:u,layout:s,siderProps:Y,collapsed:c,siderWidth:N,onMenuHeaderClick:G,links:D,fixedSiderbar:k,logoStyle:J,menuExtraRender:j,menuFooterRender:$,menuContentRender:R,isMobile:v,onCollapse:I}=e,Q=t.classNames(y.class,n.value.hashId,{[`${a.value}-fixed`]:k,[`${a.value}-fixed-mix`]:s==="mix"&&!v&&k,[`${a.value}-collapsed`]:c,[`${a.value}-${s}`]:s&&!v,[`${a.value}-${s==="mix"&&!v?"light":u}`]:!0,[`${a.value}-mix`]:s==="mix"&&!v,[`${a.value}-stylish`]:!!o}),B=z(e),F=j&&j(e),O=$&&($==null?void 0:$(e)),A=R!==!1&&l.createVNode(H.default,l.mergeProps(e,{key:`base-menu-${c&&!v?"vertical":"inline"}`,mode:c&&!v?"vertical":"inline",theme:g.value,class:t.classNames(`${a.value}-menu`,n.value.hashId)}),null),Z=R?R(e,A):A,p=(D||[]).map((d,ee)=>{var W,q,w;const r={class:`${a.value}-link`,key:ee};if(l.isVNode(d)&&Array.isArray(d.children)&&d.children.length>0)if(((W=d.children)==null?void 0:W.length)>=2)r.title=d.children[1].children[0].children,r.label=d.children[1],r.icon=d.children[0];else{const P=d.children[0].children,le=P.substring(1),ae=l.createVNode("span",{class:`${(q=n.value.token)==null?void 0:q.antCls}icon ${(w=n.value.token)==null?void 0:w.antCls}-menu-item-icon`},[P.trim().charAt(0).toUpperCase()]);r.title=P,r.icon=ae,r.label=le}else{const C=d;r.label=C.label,r.title=C.title,r.icon=C.icon}return r}),L=l.createVNode(l.Fragment,null,[B&&l.createVNode("div",{class:t.classNames(`${a.value}-logo`,n.value.hashId,{[`${a.value}-logo-collapsed`]:c}),onClick:f?G:void 0,id:"logo",style:J},[B,!v&&E.value]),F&&l.createVNode("div",{class:t.classNames([`${a.value}-extra`,!B&&`${a.value}-extra-no-logo`,n.value.hashId])},[F]),l.createVNode("div",{style:{flex:1,overflowY:"auto",overflowX:"hidden"}},[Z]),D?l.createVNode("div",{class:t.classNames(`${a.value}-links`,n.value.hashId)},[l.createVNode(b.Menu,{inlineIndent:16,class:t.classNames(`${a.value}-link-menu`,n.value.hashId),selectedKeys:[],openKeys:[],theme:e.theme,mode:"inline",items:p},null)]):null,f.value&&e.headerRender===!1&&X.value,O&&l.createVNode("div",{class:t.classNames([`${a.value}-footer`,n.value.hashId,{[`${a.value}-footer-collapsed`]:c}])},[O])]);return U.wrapSSR(l.createVNode(l.Fragment,null,[k&&!v&&!h.value&&l.createVNode("div",{style:{width:`${c?m.value:N}px`,overflow:"hidden",flex:`0 0 ${c?m.value:N}px`,maxWidth:`${c?m.value:N}px`,minWidth:`${c?m.value:N}px`,transition:"all 0.2s ease 0s"}},null),l.createVNode(oe,l.mergeProps({class:t.classNames(Q,n.value.hashId,h.value),style:y.style,collapsed:c,collapsedWidth:m.value,collapsible:!0,trigger:null,breakpoint:i===!1?void 0:i,theme:g.value,onCollapse:d=>{v||I==null||I(d)},width:N},Y),{default:()=>[h.value?l.createVNode("div",{class:t.classNames(`${a.value}-hide-when-collapsed`,n.value.hashId),style:{height:"100%",width:"100%",opacity:h.value?0:1}},[L]):L,S.value?l.createVNode("div",{class:t.classNames(`${a.value}-collapsed-button`,n.value.hashId)},[S.value]):null]})]))}}});exports.default=se;exports.privateSiderMenuProps=_;exports.renderLogoAndTitle=z;exports.siderMenuProps=K;
