"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const o=require("vue"),_=require("ant-design-vue"),I=require("./typing/layoutToken.js"),O=require("ant-design-vue/lib/config-provider/context"),c=require("ant-design-vue/lib/_util/hooks/useMemo"),M=require("./context.js"),D=require("dayjs");require("dayjs/locale/zh-cn");const b=require("./useStyle/index.js"),C=require("./intl.js"),B=require("./utils/merge.js"),S=require("./useStyle/token.js"),$=require("./CacheClean.js"),U={},{useCacheToken:L}=_.cssinjs,m=()=>{var e,r;return!(typeof process<"u"&&(((e=process.env.NODE_ENV)==null?void 0:e.toUpperCase())==="TEST"||((r=process.env.NODE_ENV)==null?void 0:r.toUpperCase())==="DEV")||typeof U<"u"&&("production".toUpperCase()==="TEST"||"production".toUpperCase()==="DEV"))},N=()=>({autoClearCache:Boolean,dark:{type:Boolean,default:void 0},compact:{type:Boolean,default:void 0},token:Object,prefixCls:String,valueTypeMap:Object,hashed:{type:Boolean,default:void 0}}),H=o.defineComponent({name:"ConfigProviderContainer",props:N(),setup(e,{slots:r}){var P,q;const{locale:a,getPrefixCls:p,...v}=O.useConfigContextInject(),u=(q=(P=b.proTheme).useToken)==null?void 0:q.call(P),n=M.useProConfigContextInject(),d=o.computed(()=>e.prefixCls?`.${e.prefixCls}`:`.${p()}-pro`),g=o.computed(()=>"."+p()),V=o.computed(()=>`${d.value}`),y=c(()=>I.getLayoutDesignToken(e.token||{},u.token.value||S.defaultToken),[()=>e.token,()=>u.token.value]),k=c(()=>{var s,x;const t=(s=a==null?void 0:a.value)==null?void 0:s.locale,l=C.findIntlKeyByAntdLocaleKey(t),i=t&&((x=n.value.intl)==null?void 0:x.locale)==="default"?C.intlMap[l]:n.value.intl||C.intlMap[l];return{...n.value,dark:e.dark??n.value.dark,compact:e.compact??n.value.compact,token:B.merge(n.value.token,u.token.value,{proComponentsCls:d.value,antCls:g.value,themeId:u.theme.value.id,layout:y.value}),intl:i||C.zhCNIntl}},[()=>a==null?void 0:a.value,()=>n.value,()=>e.dark,()=>e.compact,()=>u.token.value,()=>u.theme.value.id,()=>d.value,()=>g.value,()=>y.value]),T=o.computed(()=>{var t;return{...((t=k.value)==null?void 0:t.token)||{},proComponentsCls:d.value}}),h=L(u.theme,o.computed(()=>[u.token.value,T.value??{}]),o.computed(()=>({salt:V.value,override:T.value}))),f=c(()=>e.hashed===!1||n.value.hashed===!1?"":m()?h.value[1]:"",[()=>h.value[1],()=>n.value.hashed,()=>e.hashed]),j=c(()=>({...k.value,valueTypeMap:e.valueTypeMap||n.value.valueTypeMap,token:h.value[0],theme:u.theme.value,hashed:e.hashed,hashId:f.value}),[()=>k.value,()=>e.valueTypeMap,()=>h.value[0],()=>u.theme.value,()=>e.hashed,()=>f.value]);o.watch(()=>a==null?void 0:a.value.locale,()=>{var t;D.locale((t=a==null?void 0:a.value)==null?void 0:t.locale)},{immediate:!0});const E=c(()=>{var t;return{...(t=v.theme)==null?void 0:t.value,hashed:e.hashed!==!1&&n.value.hashed!==!1&&m(),hashId:f.value}},[()=>{var t;return(t=v.theme)==null?void 0:t.value},()=>f.value,()=>e.hashed,()=>n.value.hashed,()=>m()]);return M.useProConfigContextProvider(j),()=>{const t={...Object.keys(v).reduce((l,i)=>{const s=v[i];return o.isRef(s)?l[i]=s.value:l[i]=s,l},{}),theme:E.value,prefixCls:p()};return o.createVNode(_.ConfigProvider,t,{default:()=>{var l;return[e.autoClearCache&&o.createVNode($.default,null,null),(l=r.default)==null?void 0:l.call(r)]}})}}});exports.default=H;exports.isNeedOpenHash=m;exports.proConfigProviderProps=N;
